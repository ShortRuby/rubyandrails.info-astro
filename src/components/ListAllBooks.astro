---
import CardBook from "./CardBook.astro";

const allBooks = await Astro.glob("../pages/books/*.md");
const { all=false, title, link } = Astro.props;
---
<section class="mb-16 pb-4 ">

{title &&
link ?
  <a href=`/books/all` class="hover:text-red-500">
    <h2 class="text-4xl capitalize md:text-5xl pb-12 pt-20">{title}</h2>
  </a>
  :
  <h2 class="text-4xl capitalize md:text-5xl pb-12 pt-20">{title}</h2>
}
  <div
    class="place-items-stretch mb-12 grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-6 xl:gap-10"
  >
{
all ?

   allBooks.map((book => 
    <CardBook title={book.frontmatter.title} path={book.frontmatter.path}
            authors={book.frontmatter.authors}
            cover={book.frontmatter.cover}
            url={book.url}
            free={book.frontmatter.free}
    } />
  ))
  :
   allBooks.splice(0, 12).map((book => 
    <CardBook title={book.frontmatter.title} path={book.frontmatter.path}
            authors={book.frontmatter.authors}
            cover={book.frontmatter.cover}
            url={book.url}
            free={book.frontmatter.free}
    } />
  ))
}

  </div>
  <slot name="nogrid"/>
  { link && 
  <a href=`/books/all` class="text-2xl capitalize text-blue-600 hover:text-red-600 transition"
    >Explore all books</a>
  }
</section>
